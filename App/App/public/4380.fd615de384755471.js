"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4380],{4380:(F,f,r)=>{r.r(f),r.d(f,{DashboardPageModule:()=>j});var g=r(177),l=r(4742),p=r(4341),u=r(8986),e=r(4438),m=r(536),b=r(3656),_=r(7246);const C=o=>({"background-color":o});let v=(()=>{var o;class s{constructor(){this.title="",this.background_color="transparent",this.image_1="",this.image_2="",this.id="",this.service="",this.onDeleteClicked=new e.bkB,this.onCardClicked=new e.bkB}getServiceColor(){switch(this.service){case"Spotify":return"#009b00";case"Twitch":return"#7452a9";case"Github":return"#344049";case"Unsplash":return"#737373";case"Google":return"#96d4ff";case"Discord":return"#6b87ff"}return this.background_color}deleteCard(){this.onDeleteClicked.emit(this.id)}cardClicked(){this.onCardClicked.emit()}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-dashboard-cards"]],inputs:{title:"title",background_color:"background_color",image_1:"image_1",image_2:"image_2",id:"id",service:"service"},outputs:{onDeleteClicked:"onDeleteClicked",onCardClicked:"onCardClicked"},decls:8,vars:6,consts:[[1,"card-container",3,"ngStyle"],[1,"card-title",3,"click"],[1,"bottom-right-circles",3,"click"],["alt","first service logo",1,"small-circle-image",3,"click","src"],["alt","second service logo",1,"small-circle-image",3,"click","src"],[1,"bottom-left-circles"],["src","https://uxwing.com/wp-content/themes/uxwing/download/user-interface/recycle-bin-icon.png","alt","delete icon","title","Delete this configuration",1,"deleteBin",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"h2",1),e.bIt("click",function(){return n.cardClicked()}),e.EFF(2),e.k0s(),e.j41(3,"div",2),e.bIt("click",function(){return n.cardClicked()}),e.j41(4,"img",3),e.bIt("click",function(){return n.cardClicked()}),e.k0s(),e.j41(5,"img",4),e.bIt("click",function(){return n.cardClicked()}),e.k0s()(),e.j41(6,"div",5)(7,"img",6),e.bIt("click",function(){return n.deleteCard()}),e.k0s()()()),2&t&&(e.Y8G("ngStyle",e.eq3(4,C,n.getServiceColor())),e.R7$(2),e.JRh(n.title),e.R7$(2),e.Y8G("src",n.image_1,e.B4B),e.R7$(),e.Y8G("src",n.image_2,e.B4B))},dependencies:[g.B3],styles:[".card-container[_ngcontent-%COMP%]{width:40vh;max-width:300px;height:200px;border-radius:30px;padding:16px;box-shadow:0 4px 8px #0000001a;box-sizing:border-box;position:relative;overflow:hidden;cursor:pointer}.card-container[_ngcontent-%COMP%]:hover{filter:drop-shadow(0 0 .75rem rgb(136,136,136))}.small-circle-image[_ngcontent-%COMP%]{border-style:solid;border-width:2px;border-color:#fff}.card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#fff;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;position:absolute;left:0;top:0;height:100%;width:100%;margin:0;padding:20px}.card-description[_ngcontent-%COMP%]{font-size:18px;margin-top:80px;color:#fff;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.bottom-right-circles[_ngcontent-%COMP%]{position:absolute;bottom:16px;right:16px;display:flex;gap:8px}.bottom-left-circles[_ngcontent-%COMP%]{position:absolute;bottom:16px;left:16px;display:flex;width:48px;height:48px;background-color:#fff;padding:10px;border-radius:50%}.deleteBin[_ngcontent-%COMP%]{width:28px;height:28px}.small-circle-image[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;object-fit:cover;background-color:#fff}@media screen and (max-width: 380px){.card-container[_ngcontent-%COMP%]{width:50vh}}"]}),s})();const k=["editModal"],P=o=>({color:o});function D(o,s){1&o&&e.nrm(0,"app-navbar")}function x(o,s){if(1&o){const i=e.RV6();e.j41(0,"app-dashboard-cards",11),e.bIt("onDeleteClicked",function(n){e.eBV(i);const a=e.XpG();return e.Njj(a.deleteConfig(n))})("onCardClicked",function(){const n=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.launchEditor(n.configID))}),e.k0s()}if(2&o){const i=s.$implicit;e.FS9("service",i.apiname),e.FS9("title",i.name),e.FS9("image_1",i.actionAPILogoUrl),e.FS9("image_2",i.reactionAPILogoUrl),e.FS9("id",i.configID)}}function O(o,s){if(1&o){const i=e.RV6();e.j41(0,"ion-button",13),e.bIt("click",function(){const n=e.eBV(i).$implicit,a=e.XpG(2);return e.Njj(a.selectServices(n.name,!0))}),e.EFF(1),e.k0s()}if(2&o){const i=s.$implicit;e.R7$(),e.JRh(i.name)}}function M(o,s){if(1&o&&(e.j41(0,"code",20),e.EFF(1),e.nrm(2,"br"),e.k0s()),2&o){const i=s.$implicit,t=e.XpG(2);e.Y8G("ngStyle",e.eq3(2,P,t.getColor(i))),e.R7$(),e.SpI(" ",i,"")}}function y(o,s){if(1&o){const i=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-buttons",12)(5,"ion-button",13),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.setOpen(!1))}),e.EFF(6,"Close"),e.k0s()()()(),e.j41(7,"ion-header")(8,"ion-toolbar")(9,"ion-buttons",14)(10,"ion-button",13),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.selectServices("",!0))}),e.EFF(11,"All"),e.k0s(),e.DNE(12,O,2,1,"ion-button",15),e.j41(13,"ion-toggle",16),e.mxI("ngModelChange",function(n){e.eBV(i);const a=e.XpG();return e.DH7(a.autoScroll,n)||(a.autoScroll=n),e.Njj(n)}),e.EFF(14,"Auto Scroll"),e.k0s()()()(),e.j41(15,"ion-content",17)(16,"div",18),e.DNE(17,M,3,4,"code",19),e.k0s()()}if(2&o){const i=e.XpG();e.R7$(3),e.SpI("Webservice Logs ",i.selectedLogs,""),e.R7$(9),e.Y8G("ngForOf",i.apis),e.R7$(),e.R50("ngModel",i.autoScroll),e.Y8G("value",i.autoScroll)("checked",i.autoScroll),e.R7$(4),e.Y8G("ngForOf",i.currentLogs)}}const w=[{path:"",component:(()=>{var o;class s{loadItems(t){throw new Error("Method not implemented.")}constructor(t,n,a){this.service=t,this.platform=n,this.router=a,this.editModal=null,this.items=[],this.userConfigs=[],this.actions=[],this.reactions=[],this.apis=[],this.datas=[],this.showActiveArea=[],this.searchText="",this.token="",this.currentLogs=[],this.isModalOpen=!1,this.selectedLogs="",this.logInterval=null,this.autoScroll=!0}navigateToIntegrations(){this.platform.is("ios")||this.platform.is("android")?this.router.navigate(["/tabs/integrations"]):this.router.navigate(["/dashboard/integrations"])}handleInput(t){const n=t.target.value.toLowerCase();this.showActiveArea=this.datas.filter(a=>a.name.toLowerCase().indexOf(n.toLowerCase())>-1)}getApis(){this.service.getAllServices(this.token).subscribe(t=>{this.apis=t.data,this.getActions()},t=>{console.error(t)})}getActions(){this.service.getActions(this.token).subscribe(t=>{this.actions=t.data,this.getReactions()},t=>{console.error(t)})}getReactions(){this.service.getReactions(this.token).subscribe(t=>{this.reactions=t.data,this.getConfig()},t=>{console.error(t)})}getConfig(){this.service.getUserConfigs(this.token).subscribe(t=>{this.userConfigs=t.data,this.generateCards()},t=>{console.error(t)})}generateCards(){this.datas=[];for(let t of this.userConfigs){let n=this.actions.find(d=>d.id===t.actions_id),a=this.reactions.find(d=>d.id===t.reaction_id),c=this.apis.find(d=>d.name==(null==n?void 0:n.api_name)),h=this.apis.find(d=>d.name==(null==a?void 0:a.api_name));null==c||null==h||null==n||null==a||this.datas.push({name:`On ${n.title.toLowerCase()}, ${a.title.toLowerCase()}`,actionAPILogoUrl:c.icon_url,reactionAPILogoUrl:h.icon_url,configID:t.id,apiname:c.name})}this.showActiveArea=this.datas.slice()}launchEditor(t){null!=t&&this.router.navigate(["/dashboard/editor"],{queryParams:{configID:t}})}deleteConfig(t){this.token=JSON.parse(JSON.stringify(localStorage.getItem("Token"))),confirm("Confirm suppression ?")&&this.service.deleteUserConfigs(this.token,t).subscribe(n=>{location.reload()},n=>{console.error(n),alert(`Unable to delete user config: ${n}`)})}selectServices(t,n){this.selectedLogs=t,n&&this.getLogs()}getLogs(){if(!this.isModalOpen)return;let t=JSON.parse(JSON.stringify(localStorage.getItem("Token"))),n=JSON.parse(JSON.stringify(localStorage.getItem("Email")));this.service.getLogs(t,n,this.selectedLogs).subscribe(a=>{this.currentLogs=a.logs;let c=document.getElementById("codeDiv");null!=c&&this.autoScroll&&(c.scrollTop=c.scrollHeight)},a=>{console.error(a)})}setOpen(t){this.isModalOpen=t,this.isModalOpen&&(this.selectedLogs="")}getColor(t){return t.includes("INFO")?"green":t.includes("ERROR")?"red":t.includes("WARN")?"orange":"black"}ngOnInit(){this.token=JSON.parse(JSON.stringify(localStorage.getItem("Token"))),this.token||this.router.navigate(["/home"]),this.getApis(),this.logInterval=setInterval(this.getLogs.bind(this),2e3)}}return(o=s).\u0275fac=function(t){return new(t||o)(e.rXU(m.G),e.rXU(b.OD),e.rXU(u.Ix))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-profil"]],viewQuery:function(t,n){if(1&t&&e.GBs(k,5),2&t){let a;e.mGM(a=e.lsd())&&(n.editModal=a.first)}},decls:18,vars:5,consts:[["editModal",""],[4,"ngIf"],[1,"content"],[1,"topWrappedContent"],["placeholder","Search",3,"ionInput","value","debounce"],[1,"buttonContent"],[1,"lighButton",3,"click"],[1,"integrationList"],[3,"service","title","image_1","image_2","id","onDeleteClicked","onCardClicked",4,"ngFor","ngForOf"],[1,"bottom"],[3,"willDismiss","isOpen"],[3,"onDeleteClicked","onCardClicked","service","title","image_1","image_2","id"],["slot","end"],[3,"click"],[1,"topToolBar"],[3,"click",4,"ngFor","ngForOf"],[1,"toggleScroll",3,"ngModelChange","ngModel","value","checked"],[1,"ion-padding"],["id","codeDiv",1,"codeDiv"],[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"]],template:function(t,n){if(1&t){const a=e.RV6();e.j41(0,"ion-content"),e.DNE(1,D,1,0,"app-navbar",1),e.j41(2,"div",2)(3,"div",3)(4,"h1"),e.EFF(5,"Start creating your automations"),e.k0s(),e.j41(6,"ion-searchbar",4),e.bIt("ionInput",function(h){return e.eBV(a),e.Njj(n.handleInput(h))}),e.k0s()(),e.j41(7,"div",5)(8,"a",6),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateToIntegrations())}),e.EFF(9,"Create New"),e.k0s(),e.j41(10,"a",6),e.bIt("click",function(){return e.eBV(a),e.Njj(n.setOpen(!0))}),e.EFF(11,"Logs"),e.k0s()(),e.j41(12,"div",7),e.DNE(13,x,1,5,"app-dashboard-cards",8),e.k0s(),e.nrm(14,"div",9),e.k0s()(),e.j41(15,"ion-modal",10,0),e.bIt("willDismiss",function(){return e.eBV(a),e.Njj(n.setOpen(!1))}),e.DNE(17,y,18,6,"ng-template"),e.k0s()}2&t&&(e.R7$(),e.Y8G("ngIf",n.platform.is("desktop")),e.R7$(5),e.FS9("value",n.searchText),e.Y8G("debounce",500),e.R7$(7),e.Y8G("ngForOf",n.showActiveArea),e.R7$(2),e.Y8G("isOpen",n.isModalOpen))},dependencies:[g.Sq,g.bT,g.B3,p.BC,p.vS,l.Jm,l.QW,l.W9,l.eU,l.S1,l.BC,l.BY,l.ai,l.Sb,l.hB,l.Gw,_._,v],styles:[".content[_ngcontent-%COMP%]{height:100%;margin-top:constant(safe-area-inset-top)!important;margin-top:env(safe-area-inset-top)!important;width:100%;overflow-y:scroll}.buttonIcon[_ngcontent-%COMP%]{width:100%;height:100%}.chooseClass[_ngcontent-%COMP%]{align-content:center;align-self:center;text-align:center;width:85%;overflow-y:scroll;font-size:xx-large;font-weight:bolder}.topWrappedContent[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;align-items:center;flex-direction:column}ion-searchbar[_ngcontent-%COMP%]{width:90%}h1[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-weight:400;font-size:xx-large;text-align:center}input[_ngcontent-%COMP%]{padding:15px;margin:15px;border-radius:15px;border-style:none;filter:drop-shadow(0 0 .1rem grey);width:100%;align-self:center;align-items:center;align-content:center;justify-content:center;justify-items:center;justify-self:center}.integrationList[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;flex-wrap:wrap}.integrationList[_ngcontent-%COMP%]   app-dashboard-cards[_ngcontent-%COMP%]{margin:20px}.integrationListSmall[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;flex-wrap:wrap}.buttonContent[_ngcontent-%COMP%]{width:100%;margin-top:5vh;margin-bottom:5vh;display:flex;justify-content:center;height:10vh;align-items:center;align-self:center}ion-input[_ngcontent-%COMP%]{--highlight-color-valid: #0054e9;font-size:large}@media screen and (min-width: 750px){ion-modal[_ngcontent-%COMP%]{--border-radius: 15px;--overflow: hidden;--position: relative;--width: 90%;--height: 90%;margin-top:constant(safe-area-inset-top)!important;margin-top:env(safe-area-inset-top)!important}}.codeDiv[_ngcontent-%COMP%]{overflow:scroll;width:100%;height:100%}code[_ngcontent-%COMP%]{font-family:Consolas,courier new;background-color:#f1f1f1;padding:2px;font-size:105%;width:100%;display:block}.toggleScroll[_ngcontent-%COMP%]{padding-right:25px;margin-left:auto}.topToolBar[_ngcontent-%COMP%]{overflow-x:scroll}.buttonContent[_ngcontent-%COMP%]:hover{cursor:pointer}.lighButton[_ngcontent-%COMP%]{background:#919191;text-decoration:none;height:60%;width:auto;border-radius:10px;color:#fff;font-size:large;font-weight:700;max-width:400px;min-width:150px;padding:15px;text-align:center;justify-content:center;align-self:center;align-content:center;margin:5vw;min-height:45px}.lighButton[_ngcontent-%COMP%]:hover{background:#636363;cursor:pointer}.lighButton[_ngcontent-%COMP%]:active{background:#424242}.bottom[_ngcontent-%COMP%]{padding-bottom:80px}@media (prefers-color-scheme: dark){ion-searchbar[_ngcontent-%COMP%]{--box-shadow: 0px 1px 2px 0px #f1f1f1}}"]}),s})()},{path:"integrations",loadChildren:()=>Promise.resolve().then(r.bind(r,1095)).then(o=>o.IntegrationsPageModule)},{path:"profile",loadChildren:()=>r.e(5399).then(r.bind(r,5399)).then(o=>o.ProfilePageModule)},{path:"editor",loadChildren:()=>r.e(6894).then(r.bind(r,6894)).then(o=>o.EditeurPageModule)}];let S=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[u.iI.forChild(w),u.iI]}),s})();var I=r(1095);let j=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.MD,p.YN,l.bv,S,I.IntegrationsPageModule]}),s})()}}]);