"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5399],{7464:(ce,W,h)=>{h.d(W,{E_:()=>B,F3:()=>R});var f=h(467);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var L=function(r){return r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE",r}(L||{});class F extends Error{constructor(t,n,s){super(t),this.message=t,this.code=n,this.data=s}}const Y=r=>{var t,n,s,l,a;const p=r.CapacitorCustomPlatform||null,d=r.Capacitor||{},w=d.Plugins=d.Plugins||{},g=r.CapacitorPlatforms,D=(null===(t=null==g?void 0:g.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==p?p.name:(r=>{var t,n;return null!=r&&r.androidBridge?"android":null!==(n=null===(t=null==r?void 0:r.webkit)||void 0===t?void 0:t.messageHandlers)&&void 0!==n&&n.bridge?"ios":"web"})(r)),de=(null===(n=null==g?void 0:g.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==D()),pe=(null===(s=null==g?void 0:g.currentPlatform)||void 0===s?void 0:s.isPluginAvailable)||(v=>{const _=Q.get(v);return!!(null!=_&&_.platforms.has(D())||oe(v))}),oe=(null===(l=null==g?void 0:g.currentPlatform)||void 0===l?void 0:l.getPluginHeader)||(v=>{var _;return null===(_=d.PluginHeaders)||void 0===_?void 0:_.find($=>$.name===v)}),Q=new Map,ve=(null===(a=null==g?void 0:g.currentPlatform)||void 0===a?void 0:a.registerPlugin)||((v,_={})=>{const $=Q.get(v);if($)return console.warn(`Capacitor plugin "${v}" already registered. Cannot register plugins twice.`),$.proxy;const I=D(),T=oe(v);let O;const _e=function(){var P=(0,f.A)(function*(){return!O&&I in _?O=O="function"==typeof _[I]?yield _[I]():_[I]:null!==p&&!O&&"web"in _&&(O=O="function"==typeof _.web?yield _.web():_.web),O});return function(){return P.apply(this,arguments)}}(),q=P=>{let C;const k=(...A)=>{const E=_e().then(y=>{const j=((P,C)=>{var k,A;if(!T){if(P)return null===(A=P[C])||void 0===A?void 0:A.bind(P);throw new F(`"${v}" plugin is not implemented on ${I}`,L.Unimplemented)}{const E=null==T?void 0:T.methods.find(y=>C===y.name);if(E)return"promise"===E.rtype?y=>d.nativePromise(v,C.toString(),y):(y,j)=>d.nativeCallback(v,C.toString(),y,j);if(P)return null===(k=P[C])||void 0===k?void 0:k.bind(P)}})(y,P);if(j){const J=j(...A);return C=null==J?void 0:J.remove,J}throw new F(`"${v}.${P}()" is not implemented on ${I}`,L.Unimplemented)});return"addListener"===P&&(E.remove=(0,f.A)(function*(){return C()})),E};return k.toString=()=>`${P.toString()}() { [capacitor code] }`,Object.defineProperty(k,"name",{value:P,writable:!1,configurable:!1}),k},ae=q("addListener"),se=q("removeListener"),Pe=(P,C)=>{const k=ae({eventName:P},C),A=function(){var y=(0,f.A)(function*(){const j=yield k;se({eventName:P,callbackId:j},C)});return function(){return y.apply(this,arguments)}}(),E=new Promise(y=>k.then(()=>y({remove:A})));return E.remove=(0,f.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield A()}),E},ee=new Proxy({},{get(P,C){switch(C){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return T?Pe:ae;case"removeListener":return se;default:return q(C)}}});return w[v]=ee,Q.set(v,{name:v,proxy:ee,platforms:new Set([...Object.keys(_),...T?[I]:[]])}),ee});return d.convertFileSrc||(d.convertFileSrc=v=>v),d.getPlatform=D,d.handleError=v=>r.console.error(v),d.isNativePlatform=de,d.isPluginAvailable=pe,d.pluginMethodNoop=(v,_,$)=>Promise.reject(`${$} does not have an implementation of "${_}".`),d.registerPlugin=ve,d.Exception=F,d.DEBUG=!!d.DEBUG,d.isLoggingEnabled=!!d.isLoggingEnabled,d.platform=d.getPlatform(),d.isNative=d.isNativePlatform(),d},S=(r=>r.Capacitor=Y(r))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),R=S.registerPlugin;class B{constructor(t){this.listeners={},this.retainedEventArguments={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,n){var s=this;let l=!1;this.listeners[t]||(this.listeners[t]=[],l=!0),this.listeners[t].push(n);const p=this.windowListeners[t];p&&!p.registered&&this.addWindowListener(p),l&&this.sendRetainedArgumentsForEvent(t);const d=function(){var g=(0,f.A)(function*(){return s.removeListener(t,n)});return function(){return g.apply(this,arguments)}}();return Promise.resolve({remove:d})}removeAllListeners(){var t=this;return(0,f.A)(function*(){t.listeners={};for(const n in t.windowListeners)t.removeWindowListener(t.windowListeners[n]);t.windowListeners={}})()}notifyListeners(t,n,s){const l=this.listeners[t];if(l)l.forEach(a=>a(n));else if(s){let a=this.retainedEventArguments[t];a||(a=[]),a.push(n),this.retainedEventArguments[t]=a}}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(t="not implemented"){return new S.Exception(t,L.Unimplemented)}unavailable(t="not available"){return new S.Exception(t,L.Unavailable)}removeListener(t,n){var s=this;return(0,f.A)(function*(){const l=s.listeners[t];if(!l)return;const a=l.indexOf(n);s.listeners[t].splice(a,1),s.listeners[t].length||s.removeWindowListener(s.windowListeners[t])})()}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(s=>{this.notifyListeners(t,s)}))}}const H=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),z=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class K extends B{getCookies(){return(0,f.A)(function*(){const t=document.cookie,n={};return t.split(";").forEach(s=>{if(s.length<=0)return;let[l,a]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");l=z(l).trim(),a=z(a).trim(),n[l]=a}),n})()}setCookie(t){return(0,f.A)(function*(){try{const n=H(t.key),s=H(t.value),l=`; expires=${(t.expires||"").replace("expires=","")}`,a=(t.path||"/").replace("path=",""),p=null!=t.url&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${s||""}${l}; path=${a}; ${p};`}catch(n){return Promise.reject(n)}})()}deleteCookie(t){return(0,f.A)(function*(){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}})()}clearCookies(){return(0,f.A)(function*(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(t){return Promise.reject(t)}})()}clearAllCookies(){var t=this;return(0,f.A)(function*(){try{yield t.clearCookies()}catch(n){return Promise.reject(n)}})()}}R("CapacitorCookies",{web:()=>new K});const c=function(){var r=(0,f.A)(function*(t){return new Promise((n,s)=>{const l=new FileReader;l.onload=()=>{const a=l.result;n(a.indexOf(",")>=0?a.split(",")[1]:a)},l.onerror=a=>s(a),l.readAsDataURL(t)})});return function(n){return r.apply(this,arguments)}}();class o extends B{request(t){return(0,f.A)(function*(){const n=((r,t={})=>{const n=Object.assign({method:r.method||"GET",headers:r.headers},t),l=((r={})=>{const t=Object.keys(r);return Object.keys(r).map(l=>l.toLocaleLowerCase()).reduce((l,a,p)=>(l[a]=r[t[p]],l),{})})(r.headers)["content-type"]||"";if("string"==typeof r.data)n.body=r.data;else if(l.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[p,d]of Object.entries(r.data||{}))a.set(p,d);n.body=a.toString()}else if(l.includes("multipart/form-data")||r.data instanceof FormData){const a=new FormData;if(r.data instanceof FormData)r.data.forEach((d,w)=>{a.append(w,d)});else for(const d of Object.keys(r.data))a.append(d,r.data[d]);n.body=a;const p=new Headers(n.headers);p.delete("content-type"),n.headers=p}else(l.includes("application/json")||"object"==typeof r.data)&&(n.body=JSON.stringify(r.data));return n})(t,t.webFetchExtra),s=((r,t=!0)=>r?Object.entries(r).reduce((s,l)=>{const[a,p]=l;let d,w;return Array.isArray(p)?(w="",p.forEach(g=>{d=t?encodeURIComponent(g):g,w+=`${a}=${d}&`}),w.slice(0,-1)):(d=t?encodeURIComponent(p):p,w=`${a}=${d}`),`${s}&${w}`},"").substr(1):null)(t.params,t.shouldEncodeUrlParams),l=s?`${t.url}?${s}`:t.url,a=yield fetch(l,n),p=a.headers.get("content-type")||"";let w,g,{responseType:d="text"}=a.ok?t:{};switch(p.includes("application/json")&&(d="json"),d){case"arraybuffer":case"blob":g=yield a.blob(),w=yield c(g);break;case"json":w=yield a.json();break;default:w=yield a.text()}const G={};return a.headers.forEach((D,Z)=>{G[Z]=D}),{data:w,headers:G,status:a.status,url:a.url}})()}get(t){var n=this;return(0,f.A)(function*(){return n.request(Object.assign(Object.assign({},t),{method:"GET"}))})()}post(t){var n=this;return(0,f.A)(function*(){return n.request(Object.assign(Object.assign({},t),{method:"POST"}))})()}put(t){var n=this;return(0,f.A)(function*(){return n.request(Object.assign(Object.assign({},t),{method:"PUT"}))})()}patch(t){var n=this;return(0,f.A)(function*(){return n.request(Object.assign(Object.assign({},t),{method:"PATCH"}))})()}delete(t){var n=this;return(0,f.A)(function*(){return n.request(Object.assign(Object.assign({},t),{method:"DELETE"}))})()}}R("CapacitorHttp",{web:()=>new o})},5399:(ce,W,h)=>{h.r(W),h.d(W,{ProfilePageModule:()=>ie});var f=h(177),x=h(4742),te=h(4341),M=h(8986),e=h(4438),U=h(536),N=h(3656),L=h(7246),F=h(467),V=h(5312);const X=(0,h(7464).F3)("Browser",{web:()=>h.e(4786).then(h.bind(h,4786)).then(c=>new c.BrowserWeb)});let S=(()=>{var c;class m{constructor(i,o,u){this.service=i,this.platform=o,this.router=u,this.connected=!1,this.app_name="",this.app_icon="",this.email=""}OAuthLogin(i,o,u){var r=this;return(0,F.A)(function*(){if(u){let t=JSON.parse(JSON.stringify(localStorage.getItem("Token")));r.service.logoutService(t,o,i.toLowerCase()).subscribe(n=>{r.connected=!1},n=>{console.error(n)})}else yield X.open({url:`${V.c.API_URL}/api/oauth/${i.toLowerCase()}/login/${localStorage.getItem("Email")}`}),yield X.addListener("browserFinished",()=>{window.location.reload()})})()}}return(c=m).\u0275fac=function(i){return new(i||c)(e.rXU(U.G),e.rXU(N.OD),e.rXU(M.Ix))},c.\u0275cmp=e.VBU({type:c,selectors:[["app-connection-card"]],inputs:{connected:"connected",app_name:"app_name",app_icon:"app_icon",email:"email"},decls:6,vars:13,consts:[[3,"click","title"],["alt","profile",1,"profile-img",3,"src"],[1,"title"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.bIt("click",function(){return o.OAuthLogin(o.app_name,o.email,o.connected)}),e.nrm(1,"img",1),e.j41(2,"p",2),e.EFF(3),e.k0s(),e.j41(4,"button"),e.EFF(5),e.k0s()()),2&i&&(e.ZvI("container ",o.app_name.toLowerCase(),""),e.FCK("title","Click to ",o.connected?"connect":"disconnect"," ",o.app_name,""),e.R7$(),e.Mz_("src","assets/icon/",o.app_name.toLowerCase(),".svg",e.B4B),e.R7$(2),e.JRh(o.app_name),e.R7$(),e.ZvI("connect-btn ",o.connected?"red":"green",""),e.R7$(),e.SpI(" ",o.connected?"Disconnect":"Connect"," "))},styles:[".container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;border-radius:20px;height:230px;width:190px;box-shadow:0 2px 4px #0000001a;justify-content:center;cursor:pointer;margin:10px}.profile-img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:contain}.title[_ngcontent-%COMP%]{font-weight:700;text-align:center;font-size:1.4rem;color:#fff}.connect-btn[_ngcontent-%COMP%]{color:#fff;border:none;border-radius:20px;width:140px;height:20px;font-size:.7rem;display:flex;justify-content:center;align-items:center;cursor:pointer;position:absolute;bottom:20px}.red[_ngcontent-%COMP%]{background-color:#e32727}.green[_ngcontent-%COMP%]{background-color:#1db954}@media (prefers-color-scheme: dark){.container[_ngcontent-%COMP%]{background:#000;box-shadow:0 2px 5px #ffffff6e}}.github[_ngcontent-%COMP%]{background:linear-gradient(217deg,#000,#5b42f3)}.twitch[_ngcontent-%COMP%]{background:linear-gradient(217deg,#af40ff,#5b42f3)}.spotify[_ngcontent-%COMP%]{background:linear-gradient(217deg,#1db954,#5b42f3)}.unsplash[_ngcontent-%COMP%]{background:linear-gradient(217deg,#fff,#5b42f3)}.discord[_ngcontent-%COMP%]{background:linear-gradient(217deg,#7289da,#5b42f3)}.google[_ngcontent-%COMP%]{background:linear-gradient(217deg,#e66465,#5b42f3)}.container[_ngcontent-%COMP%]:hover{filter:drop-shadow(0 0 .75rem rgb(136,136,136))}"]}),m})(),R=(()=>{var c;class m{constructor(i,o){this.service=i,this.router=o,this.name="",this.email="",this.username="",this.creationDate="",this.background_color="",this.image="",this.onImageChanges=new e.bkB,this.inputName="",this.inputEmail="",this.inputPassword="",this.token=""}ngOnInit(){this.token=JSON.parse(JSON.stringify(localStorage.getItem("Token"))),this.service.getUserData(this.token).subscribe(i=>{this.inputName=i.data[0].username,this.inputEmail=i.data[0].email})}updateName(i){this.inputName=i.target.value}updateEmail(i){this.email=i.target.value}updatePassword(i){this.inputPassword=i.target.value}logout(){localStorage.clear(),this.router.navigate(["/home"])}applyChanges(){let i={username:this.inputName,email:this.inputEmail,password:this.inputPassword,picture_url:this.image};i.password.length>0&&i.password.length<12&&alert("Your password can't be update (password required length of 12 chars) ! But other information was updated"),this.service.updateCurrentUser(this.token,i).subscribe(o=>{localStorage.setItem("Token",o.data.access_token),window.location.reload()},o=>{alert("Error when update account")})}changeImage(){let i=prompt("Url of an image: ",this.image);if(null!=i){if(i.length>2500)return void alert("The url is too long, please try again");this.image=i}}}return(c=m).\u0275fac=function(i){return new(i||c)(e.rXU(U.G),e.rXU(M.Ix))},c.\u0275cmp=e.VBU({type:c,selectors:[["app-profil-card"]],inputs:{name:"name",email:"email",username:"username",creationDate:"creationDate",background_color:"background_color",image:"image"},outputs:{onImageChanges:"onImageChanges"},decls:26,vars:7,consts:[[1,"card-container"],[1,"topContent"],[1,"image-container"],["alt","profile_image","title","Click to change your profile picture",1,"circle-image",3,"click","src"],["fill","white","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512",1,"edit-icon",3,"click"],["width","50px","height","50px","d","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"],[1,"title-description"],[1,"card-title"],[1,"littlep"],["labelPlacement","stacked","label","Name","placeholder","Username",3,"input","value"],["slot","start","name","person","aria-hidden","true"],["labelPlacement","stacked","disabled","true","type","email","label","Email","placeholder","Your email",3,"input","value"],["slot","start","name","mail","aria-hidden","true"],["labelPlacement","stacked","type","password","label","Password","placeholder","Your password",3,"input"],["slot","start","name","lock-closed","aria-hidden","true"],["slot","end"],[1,"buttonContainer"],[1,"btn",3,"click"],["color","danger",1,"btn",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"img",3),e.bIt("click",function(){return o.changeImage()}),e.k0s(),e.qSk(),e.j41(4,"svg",4),e.bIt("click",function(){return o.changeImage()}),e.nrm(5,"path",5),e.k0s()(),e.joV(),e.j41(6,"div",6)(7,"div",7)(8,"p"),e.EFF(9),e.nrm(10,"br"),e.j41(11,"p",8),e.EFF(12),e.k0s()()()()(),e.j41(13,"div")(14,"ion-input",9),e.bIt("input",function(r){return o.updateName(r)}),e.nrm(15,"ion-icon",10),e.k0s(),e.j41(16,"ion-input",11),e.bIt("input",function(r){return o.updateEmail(r)}),e.nrm(17,"ion-icon",12),e.k0s(),e.j41(18,"ion-input",13),e.bIt("input",function(r){return o.updatePassword(r)}),e.nrm(19,"ion-icon",14)(20,"ion-input-password-toggle",15),e.k0s(),e.j41(21,"div",16)(22,"ion-button",17),e.bIt("click",function(){return o.applyChanges()}),e.EFF(23,"Save Changes"),e.k0s(),e.j41(24,"ion-button",18),e.bIt("click",function(){return o.logout()}),e.EFF(25,"Logout"),e.k0s()()()()),2&i&&(e.xc7("background-color",o.background_color),e.R7$(3),e.Y8G("src",o.image,e.B4B),e.R7$(6),e.JRh(o.name),e.R7$(3),e.SpI("Member since ",o.creationDate,""),e.R7$(2),e.FS9("value",o.inputName),e.R7$(2),e.FS9("value",o.inputEmail))},dependencies:[x.Jm,x.iq,x.$w,x.Wv,x.Gw],styles:[".card-container[_ngcontent-%COMP%]{width:100%;padding:30px;box-shadow:0 4px 8px #00000034;box-sizing:border-box;align-content:center;border-radius:15px}.topContent[_ngcontent-%COMP%]{display:flex;margin-bottom:2vh}.top-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.circle-image[_ngcontent-%COMP%]{aspect-ratio:1/1;width:12.5%;height:auto;min-width:110px;max-width:220px;max-height:220px;border-radius:50%;background-color:#fff;object-fit:cover}.circle-image[_ngcontent-%COMP%]:hover{cursor:pointer;filter:grayscale(30%)}.image-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.circle-image[_ngcontent-%COMP%]{aspect-ratio:1/1;width:12.5%;height:auto;min-width:110px;max-width:100px;max-height:220px;border-radius:50%;background-color:#fff;object-fit:cover;transition:filter .3s ease}.image-container[_ngcontent-%COMP%]:hover   .circle-image[_ngcontent-%COMP%]{cursor:pointer;filter:brightness(50%)}.edit-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:24px;height:24px;display:none;cursor:pointer;transition:opacity .3s ease;opacity:0}.image-container[_ngcontent-%COMP%]:hover   .edit-icon[_ngcontent-%COMP%]{display:block;opacity:1}p[_ngcontent-%COMP%]{vertical-align:middle;margin:0;padding:0;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-weight:200;font-size:1.5rem;width:100%}.littlep[_ngcontent-%COMP%]{font-size:1rem}@media screen and (min-width: 800px){p[_ngcontent-%COMP%]{font-size:24px}}.buttonContainer[_ngcontent-%COMP%]{display:flex}.card-title[_ngcontent-%COMP%]{height:100%;align-items:center;display:inline-flex}.title-description[_ngcontent-%COMP%]{text-align:left;width:100%;margin-left:2%}.card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.card-description[_ngcontent-%COMP%]{font-size:18px;margin-top:10px;color:#7e7d7d;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}ion-input[_ngcontent-%COMP%]{margin:.2vh;height:70px;margin-bottom:10px;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:#ccc}ion-button[_ngcontent-%COMP%]{margin:1vh;align-items:center;align-self:center;--border-radius: 10px;width:33%;margin-left:8.25%;margin-right:8.25%;margin-top:2%}@media (prefers-color-scheme: dark){.card-container[_ngcontent-%COMP%]{background:#1a1a1a;box-shadow:0 4px 8px #cecece34}}"]}),m})();function ne(c,m){1&c&&e.nrm(0,"app-navbar")}function re(c,m){if(1&c&&e.nrm(0,"app-connection-card",7),2&c){const b=m.$implicit,i=e.XpG();e.FS9("email",i.data.Email),e.FS9("app_name",b.name),e.FS9("app_icon",b.icon_url),e.Y8G("connected",b.connected)}}function B(c,m){1&c&&e.nrm(0,"div",8)}const H=[{path:"",component:(()=>{var c;class m{constructor(i,o,u){this.service=i,this.platform=o,this.router=u,this.current_access_oauth_token="",this.current_refresh_oauth_token="",this.current_oauth_api="",this.email="",this.token="",this.data={Name:"Name",Email:"email@example.com",picture_url:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",create_at:(new Date).toDateString()},this.servicesData=[]}ngOnInit(){this.token=JSON.parse(JSON.stringify(localStorage.getItem("Token"))),this.email=JSON.parse(JSON.stringify(localStorage.getItem("Email"))),this.token||this.router.navigate(["/home"]),this.getAllServices(),this.getProfileData()}getProfileData(){this.service.getUserData(this.token).subscribe(i=>{this.data.Email=i.data[0].email,this.data.Name=i.data[0].username,""!=i.data[0].picture_url&&null!=i.data[0].picture_url&&(this.data.picture_url=i.data[0].picture_url),this.data.create_at=new Date(i.data[0].create_at).toLocaleDateString()},i=>{console.error(i)})}updateAPIBackend(){this.service.updateAPILoginTokens(this.token,this.email,{github:{access_token:"github"==this.current_oauth_api?this.current_access_oauth_token:void 0,refresh_token:"github"==this.current_oauth_api?this.current_refresh_oauth_token:void 0},twitch:{access_token:"twitch"==this.current_oauth_api?this.current_access_oauth_token:void 0,refresh_token:"twitch"==this.current_oauth_api?this.current_refresh_oauth_token:void 0},discord:{access_token:"discord"==this.current_oauth_api?this.current_access_oauth_token:void 0,refresh_token:"discord"==this.current_oauth_api?this.current_refresh_oauth_token:void 0},spotify:{access_token:"spotify"==this.current_oauth_api?this.current_access_oauth_token:void 0,refresh_token:"spotify"==this.current_oauth_api?this.current_refresh_oauth_token:void 0},google:{access_token:"google"==this.current_oauth_api?this.current_access_oauth_token:void 0,refresh_token:"google"==this.current_oauth_api?this.current_refresh_oauth_token:void 0},unsplash:{access_token:"unsplash"==this.current_oauth_api?this.current_access_oauth_token:void 0,refresh_token:"unsplash"==this.current_oauth_api?this.current_refresh_oauth_token:void 0}}).subscribe(o=>{"null"==this.current_access_oauth_token&&"null"==this.current_refresh_oauth_token&&"null"==this.current_oauth_api||(this.platform.is("desktop")?location.href="/dashboard/profile":location.href="/tabs/home/profile")},o=>{console.error(o)})}getAllServices(){this.service.getAllServices(this.token).subscribe(i=>{this.servicesData=i.data,this.servicesData.splice(this.servicesData.findIndex(o=>"nexus"==o.name.toLowerCase()),1)},i=>{console.error(i)},()=>{this.service.getAllConnections(this.token).subscribe(i=>{let o=i.data[0];for(let u=0;u<this.servicesData.length;u++)null!=o.githubAccessToken&&"github"===this.servicesData[u].name.toLowerCase()&&(this.servicesData[u].connected=!0),null!=o.spotifyAccessToken&&null!=o.spotifyRefreshToken&&"spotify"===this.servicesData[u].name.toLowerCase()&&(this.servicesData[u].connected=!0),null!=o.twitchAccessToken&&null!=o.twitchRefreshToken&&"twitch"===this.servicesData[u].name.toLowerCase()&&(this.servicesData[u].connected=!0),null!=o.googleAccessToken&&"google"===this.servicesData[u].name.toLowerCase()&&(this.servicesData[u].connected=!0),null!=o.unsplashAccessToken&&"unsplash"===this.servicesData[u].name.toLowerCase()&&(this.servicesData[u].connected=!0),null!=o.discordAccessToken&&null!=o.discordRefreshToken&&"discord"===this.servicesData[u].name.toLowerCase()&&(this.servicesData[u].connected=!0)})})}}return(c=m).\u0275fac=function(i){return new(i||c)(e.rXU(U.G),e.rXU(N.OD),e.rXU(M.Ix))},c.\u0275cmp=e.VBU({type:c,selectors:[["app-profil"]],decls:7,vars:7,consts:[[4,"ngIf"],[1,"container"],[1,"leftSide"],[3,"name","creationDate","image","email"],[1,"rightSide"],["class","serviceCard",3,"email","app_name","app_icon","connected",4,"ngFor","ngForOf"],["style","margin-bottom: 55px",4,"ngIf"],[1,"serviceCard",3,"email","app_name","app_icon","connected"],[2,"margin-bottom","55px"]],template:function(i,o){1&i&&(e.DNE(0,ne,1,0,"app-navbar",0),e.j41(1,"div",1)(2,"div",2),e.nrm(3,"app-profil-card",3),e.k0s(),e.j41(4,"div",4),e.DNE(5,re,1,4,"app-connection-card",5),e.k0s(),e.DNE(6,B,1,0,"div",6),e.k0s()),2&i&&(e.Y8G("ngIf",o.platform.is("desktop")),e.R7$(3),e.FS9("name",o.data.Name),e.FS9("creationDate",o.data.create_at),e.FS9("email",o.data.Email),e.Y8G("image",o.data.picture_url),e.R7$(2),e.Y8G("ngForOf",o.servicesData),e.R7$(),e.Y8G("ngIf",!o.platform.is("desktop")))},dependencies:[f.Sq,f.bT,L._,S,R],styles:[".container[_ngcontent-%COMP%]{display:flex;width:90%;margin-left:5%;margin-right:5%;height:100%;overflow-y:auto;background-color:--ion-background-color;margin-top:constant(safe-area-inset-top)!important;margin-top:env(safe-area-inset-top)!important}.leftSide[_ngcontent-%COMP%]{height:100%;flex:1;justify-content:center;display:flex;width:100%}app-profil-card[_ngcontent-%COMP%]{width:80vh;min-width:500px}.rightSide[_ngcontent-%COMP%]{width:90%;height:100%;display:flex;flex-wrap:wrap;flex-direction:row;align-content:center;align-items:center;justify-items:center;justify-content:center}app-profil-card[_ngcontent-%COMP%]{align-content:center}@media screen and (max-width: 1365px){app-profil-card[_ngcontent-%COMP%]{min-width:80vw}.container[_ngcontent-%COMP%]{width:100%;height:auto;display:block;overflow-y:scroll;margin-left:0%;margin-right:0%}.leftSide[_ngcontent-%COMP%]{display:block;width:100%;margin-left:0%;margin-right:0%;height:auto;flex:1;margin-bottom:20px}.rightSide[_ngcontent-%COMP%]{width:100%;margin-left:0%;margin-right:0%;align-content:start;justify-content:center;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-around;height:auto}}"]}),m})()}];let z=(()=>{var c;class m{}return(c=m).\u0275fac=function(i){return new(i||c)},c.\u0275mod=e.$C({type:c}),c.\u0275inj=e.G2t({imports:[M.iI.forChild(H),M.iI]}),m})();var K=h(1095);let ie=(()=>{var c;class m{}return(c=m).\u0275fac=function(i){return new(i||c)},c.\u0275mod=e.$C({type:c}),c.\u0275inj=e.G2t({providers:[U.G],imports:[f.MD,te.YN,x.bv,z,K.IntegrationsPageModule]}),m})()}}]);